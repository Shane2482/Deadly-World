package shane2482.deadlyworld.render;

import org.lwjgl.opengl.GL11;

import net.minecraft.block.state.IBlockState;
import net.minecraft.client.model.ModelChest;
import net.minecraft.client.renderer.GlStateManager;
import net.minecraft.client.renderer.entity.RenderEntityItem;
import net.minecraft.client.renderer.tileentity.TileEntitySpecialRenderer;
import net.minecraft.util.ResourceLocation;
import shane2482.deadlyworld.Reference;
import shane2482.deadlyworld.tiles.TileEntityBasaltChest;

public class BasaltChestRenderer extends TileEntitySpecialRenderer<TileEntityBasaltChest>{
	
	
	ResourceLocation Basalt_Chest = new ResourceLocation(Reference.MOD_ID +":"+ "textures/entity/chest/plywood_chest.png");
	private ModelChest model;
	private RenderEntityItem itemRenderer;
	
	public BasaltChestRenderer() {
		this.model = new ModelChest(); 
		 int facing = 3;  
	}
	
	
@Override
public void renderTileEntityAt(TileEntityBasaltChest te, double x, double y, double z, float partialTicks, int destroyStage) 
{
	if(te instanceof TileEntityBasaltChest)
	{
		TileEntityBasaltChest mod_chest = (TileEntityBasaltChest)te;

        GlStateManager.pushMatrix();
        IBlockState state = mod_chest.getWorld().getBlockState(mod_chest.getPos());
    switch(state.getBlock().getMetaFromState(state)){
        case 1:
            GlStateManager.rotate(0, 0, 0, 0);
           break;
            //Facing South
        case 2:
        	GL11.glTranslatef((float)x + 1.0f, (float)y + 1.0f, (float)z + 0.0f);
            GlStateManager.rotate(180, 0, 0, 1);
            break;
            //Facing North
        case 3:
        	GL11.glTranslatef((float)x + 0.0f, (float)y + 1.0f, (float)z + 1.0f);
        	GlStateManager.rotate(180, -180, 0, 1);
            break;
            //Facing East
        case 4:
        	GL11.glTranslatef((float)x + 0.0f, (float)y + 1.0f, (float)z + 0.0f);
        	GlStateManager.rotate(180, 1, 0, 1);
            break;
            //Facing West
        case 5:
        	GL11.glTranslatef((float)x + 1.0f, (float)y + 1.0f, (float)z + 1.0f);
        	GlStateManager.rotate(180, -1, 0, 1);
            break;
    }
    GlStateManager.translate((float) x, (float) y + 1.0F, (float) z + 1.0F);
    GlStateManager.scale(1.0F, -1F, -1F);
    GlStateManager.translate(0.5F, 0.5F, 0.5F);
    int facing = 3; 
    int k = 0;
    if (facing == 2) {
        k = 180;
    }
    if (facing == 3) {
        k = 0;
    }
    if (facing == 4) {
        k = 90;
    }
    if (facing == 5) {
        k = -90;
    }
    GlStateManager.rotate(k, 0.0F, 1.0F, 0.0F);
    GlStateManager.translate(-0.5F, -0.5F, -0.5F);
    float lidangle = te.prevLidAngle + (te.lidAngle - te.prevLidAngle) * partialTicks;
    lidangle = 1.0F - lidangle;
    lidangle = 1.0F - lidangle * lidangle * lidangle;
    model.chestLid.rotateAngleX = -((lidangle * 3.141593F) / 2.0F);
	this.bindTexture(Basalt_Chest);
	GL11.glPushMatrix();
	this.model.renderAll();
	GL11.glPopMatrix();
	GL11.glPopMatrix();
}
}



}